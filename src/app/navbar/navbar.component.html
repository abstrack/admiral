<nav class="navbar navbar-static-top navbar-default hebrew-direct">
  <div class="container-fluid">
    <ul class="nav navbar-nav navbar-left">
      <li *ngIf="profile">
        <a (click)="logout()" style="cursor: pointer">
          <span class="glyphicon glyphicon-log-out"></span> יציאה</a>
      </li>
      <li *ngIf="profile" class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbarSettings">
          <span class="glyphicon glyphicon-cog"></span> הגדרות</a>
        <ul class="dropdown-menu" >
          <li *ngIf="profile.roles.indexOf('ROLE_ADMIN') != -1" ><a (click)="prepareMonthHoursStandardForm()" class="hebrew-direct " style="cursor: pointer">
            <span class="fa fa-clock-o pull-right"></span><span class="pull-left" style="font-size: smaller; font-weight: bolder"> הגדרת תקן חודשי</span></a></li>
          <li role="separator" class="divider"></li>
          <li ><a (click)="preparePasswordForm(); op.toggle($event)" class="hebrew-direct " style="cursor: pointer">
            <span class="fa fa-lock pull-right"></span><span class="pull-left" style="font-size: smaller; font-weight: bolder"> שינוי סיסמא</span></a></li>
        </ul>

      </li>
    </ul>
      <div *ngIf="profile != null">
        <span class="navbar-brand profile-name" href="#">{{profile.surname + ' ' + profile.name}}</span>
      </div>
    <ul class="nav navbar-nav navbar-right" [ngSwitch]="profile">
      <li *ngIf="profile != null && !isNotFreshPass()">
        <a routerLink="/app/dashboard" routerLinkActive="active">דיווח השעות שלי</a>
      </li>
      <li *ngIf="profile != null">
        <a routerLink="/app/admin/dashboard" routerLinkActive="active" *ngIf="profile.roles.indexOf('ROLE_ADMIN') != -1">דיווחי שעות</a>
      </li>
      <li *ngIf="profile != null">
        <a routerLink="/app/admin/frontalmessages" routerLinkActive="active" *ngIf="profile.roles.indexOf('ROLE_ADMIN') != -1">הודעות מסך כניסה</a>
      </li>
      <li *ngIf="profile != null">
        <a routerLink="/app/admin/employees" routerLinkActive="active" *ngIf="profile.roles.indexOf('ROLE_ADMIN') != -1">עובדים</a>
      </li>
      <li *ngIf="profile != null">
        <a routerLink="/app/admin/clients" routerLinkActive="active" *ngIf="profile.roles.indexOf('ROLE_ADMIN') != -1">לקוחות</a>
      </li>
      <li *ngIf="profile != null">
        <a routerLink="/app/admin/reports" routerLinkActive="active" *ngIf="profile.roles.indexOf('ROLE_ADMIN') != -1">דוחות</a>
      </li>
      <li class="navbar-header">
        <a class="navbar-brand" routerLink="/" routerLinkActive="active"><img [src]="LOGO" alt="NAYA"
                                                                    style="height: 120%">
        </a>
      </li>
    </ul>
  </div>
</nav>
<p-overlayPanel #op>
  <h4 style="text-align: center">שינוי סיסמה</h4>
  <div style="text-align: center" *ngIf="passwordChangeSuccess" class="alert alert-success">
    הסיסמה עודכנה בהצלחה
  </div>
  <div style="text-align: center" *ngIf="passwordChangeFailure" class="alert alert-danger">
    {{passwordChangeFailure}}<br>
    {{passwordChangeFailure2}}<br>
    {{passwordChangeFailure3}}
  </div>
  <div *ngIf="!passwordChangeSuccess" class="row">
    <div class="form-group">
        <form name="myForm" novalidate>
      <div class="col-md-2 pull-left">
        <button type="submit" [disabled]="!newPassword || !confirmNewPassword || !(newPassword===confirmNewPassword)" class="btn btn-warning"
                (click)="updatePassword(newPassword); newPassword=''">
          <i style="font-size: large; color: white" class="fa fa-cog {{requstStarted?'fa-spin':''}}"></i></button>
      </div>
          <div class="col-md-9 pull-right">
            <label style="text-align: center">סיסמא חדשה
              <input #updatePassInput [(ngModel)]="newPassword" name="newPassword" required type="password"
                     class="form-control">
            </label>
            <ng2-password-strength-bar
              [passwordToCheck]="newPassword"
              [barLabel]="barLabel">
            </ng2-password-strength-bar>
            <label style="text-align: center">אימות סיסמא חדשה
              <input #updatePassInputAffirm [(ngModel)]="confirmNewPassword" name="confirmNewPassword" required
                     type="password" class="form-control">
            </label>
            <ng2-password-strength-bar
              [passwordToCheck]="confirmNewPassword"
              [barLabel]="barLabel">
            </ng2-password-strength-bar>
          </div>
        </form>
    </div>
  </div>
</p-overlayPanel>
<button id="openNavbarMonthHoursStandardFormButton" [hidden]="true" data-toggle="modal" data-target="#navbarMonthHoursStandardForm"></button>
<div id="navbarMonthHoursStandardForm" tabindex='-1' class="modal fade" onclose="" role="dialog">
  <div class="modal-dialog" style="margin-right: 45%">
    <div class="modal-content" style="width: 180%;">
      <div class="modal-header noselect" style="text-align: center">
        <a id="monthHoursStandardFormClose" style="float: left" data-dismiss="modal"><span class="fa fa-fw fa-close"
                                                                                style="color: #1a1a1a; cursor: pointer; font-size: large"></span></a>
        <p-dataGrid [value]="standartsUi.reverse()" [paginator]="true" [rows]="12">
          <p-header>
            <h4 style="font-weight: bold">{{'הגדרת תקן חודשי שנת '+currYear}}</h4>
            <div class="hebrew-direct">
              <p-spinner id="spinnerId" [(ngModel)]="currYear" [min]="2000" (onChange)="goToYear()" [max]="3000" [thousandSeparator]="''" [size]="4"></p-spinner>
            </div>
          </p-header>
          <template let-standard pTemplate="item">
            <div style="padding:1px; font-size: smaller" class="ui-g-12 ui-md-1">
              <p-panel [style]="{'height':'8em'}">
                <p-header>
                  <span *ngIf="standard" style="font-weight: bold; font-size: smaller; text-align: center">{{getHeader(standard.year, standard.month) | hebrewDate : 'year-month'}}</span>
                </p-header>
                <div *ngIf="standard && !(isEditedStandard == standard.month)" class="hebrew-direct">{{(standard.hoursSum)? standard.hoursSum + " ש'": ""}}</div>
                <input *ngIf="standard && (isEditedStandard == standard.month)" [(ngModel)]="numberForEditing" pattern="\d*" maxlength="5" type="text" class="form-control" style="width: 100%">
                <i title="לערוך" *ngIf="standard && !(isEditedStandard == standard.month)" class="fa fa-pencil-square-o" (click)="editStandard(standard)" style="cursor:pointer"></i>
                <i title="לשמור" *ngIf="standard && (isEditedStandard == standard.month)" class="fa fa-check-square-o" (click)="saveStandard(standard)" style="cursor:pointer"></i>
                <i title="לבטל" *ngIf="standard && (isEditedStandard == standard.month)" class="fa fa-undo" (click)="cancelStandard()" style="cursor:pointer"></i>
              </p-panel>
            </div>
          </template>
        </p-dataGrid>
      </div>
    </div>
  </div>
</div>
